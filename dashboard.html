<script>
document.addEventListener('DOMContentLoaded', function() {
    document.body.style.display = 'block';

    const userRole = sessionStorage.getItem('currentUserRole');
    const userName = sessionStorage.getItem('currentUserName');

    let roleTitle = '使用者';
    if (userRole === 'admin') roleTitle = '系統管理員';
    if (userRole === 'medical') roleTitle = '醫護人員';
    if (userRole === 'general') roleTitle = '文管人員';

    document.getElementById('user-display').innerHTML = `${roleTitle} <b>${userName}</b>`;

    /* === admin 白名單（只能看到 index1,2,3,6,7）=== */
    const adminAllow = ['card-index1','card-index2','card-index3','card-index6','card-index7'];

    document.querySelectorAll('[id^="card-index"]').forEach(el => {
        if (userRole === 'admin') {
            if (!adminAllow.includes(el.id)) el.remove();
        } else {
            if (el.id === 'card-index6' || el.id === 'card-index8') el.remove();
        }
    });

    if (userRole === 'general') {
        ['card-index2','card-index3'].forEach(id => {
            const el = document.getElementById(id);
            if (el) el.remove();
        });
    }
});
</script>
